# German Vocabulary Spaced Repetition Software

This is a full-stack web application designed to help users learn German vocabulary through an intelligent, AI-powered spaced repetition system (SRS). The application uses a Flask backend to manage user progress and serve quiz questions, and a React frontend to provide an interactive user experience.

## Description

The core of this project is a smart quiz generator that selects German words for the user to practice. It prioritizes words that the user struggles with, has recently gotten wrong, or has not seen in a while. The vocabulary data is the project's backbone, generated by a sophisticated AI prompt that produces detailed, structured information for each word, including multiple meanings, reflexive forms, and homonyms. User progress is tracked locally in JSON files, making the application self-contained and easy to set up.

## Features

-   **Intelligent Spaced Repetition:** Words are scheduled to reappear at increasing intervals based on user performance, optimizing for long-term memory retention.
-   **AI-Powered Vocabulary Generation:** A Python script leverages an advanced AI prompt to generate rich, structured data for each vocabulary word. This includes:
    -   Intelligent expansion of word forms (e.g., `verlassen` is expanded to both its transitive and reflexive (`sich verlassen auf`) forms).
    -   Handling of homonyms (e.g., `der Stock` as "stick" and "floor").
    -   Detailed grammatical info (conjugations, noun genders, plural forms, etc.).
-   **Multiple CEFR Levels:** Practice words from specific levels (A1, A2, B1) or a mix of all levels.
-   **Performance Tracking:** The application tracks daily statistics, including the number of unique words practiced and overall accuracy for the day.
-   **Data Integrity & Standardization:** A validation script ensures vocabulary files are clean, alphabetically sorted, and correctly structured.
-   **Detailed Word View:** After submitting a quiz, users can click on a word to see a detailed breakdown of all its attributes.
-   **Smart Hints:** When answering, users can hover over the question to get hints about the word type, register, or context.

## Technology Stack

-   **Backend:** Python, Flask
-   **Frontend:** JavaScript, React, Vite
-   **Data Storage:** JSON files for vocabulary and user statistics
-   **External Services:** OpenAI API for vocabulary generation

## Getting Started

Follow these instructions to get a copy of the project up and running on your local machine.

### Prerequisites

-   Python 3.8 or higher
-   Node.js and npm (or yarn)
-   Git

### Installation and Setup

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/mahesaJenar01/German-Space-Repetition-Software.git
    cd German-Space-Repetition-Software
    ```

2.  **Backend Setup (from the root directory):**
    ```bash
    # Create and activate a virtual environment
    python -m venv venv
    # On Windows:
    .\venv\Scripts\activate
    # On macOS/Linux:
    source venv/bin/activate

    # Install Python dependencies
    pip install -r requirements.txt

    # Create a .env file in the root directory for your API key
    # Add the following line to the .env file:
    OPENAI_API_KEY="your_secret_api_key_here"
    ```

3.  **Frontend Setup:**
    ```bash
    # Navigate to the frontend directory
    cd frontend

    # Install Node.js dependencies
    npm install

    # Return to the root directory
    cd ..
    ```

4.  **Generate Vocabulary & Validate (Optional):**
    -   To add new words, add them to `input.txt` (comma or newline separated).
    -   Run the AI script to process only the new words:
        ```bash
        python process_metrics.py
        ```
    -   After adding words, it's good practice to run the validator. This will sort all vocabulary files alphabetically and ensure data is clean.
        ```bash
        python file_validator.py
        ```

### Running the Application

You will need to run the backend and frontend servers in two separate terminals.

1.  **Start the Backend Server (from the root directory):**
    ```bash
    python server.py
    ```
    The Flask server will start on `http://127.0.0.1:5000`.

2.  **Start the Frontend Server (from the root directory):**
    ```bash
    cd frontend
    npm run dev
    ```
    The React development server will start. Access the application in your browser at `http://localhost:5173`.

## Usage

1.  Open the application in your web browser.
2.  Select a difficulty level (A1, A2, B1, or Mix).
3.  A quiz of five words will be generated.
4.  Fill in the answers and press `Enter` to submit.
5.  Review your results. Click any word to see more details.
6.  Press `Enter` again to start the next quiz.

## For Developers

### Project Structure

-   **/ (root)**: Backend Flask application, scripts, and data folders.
    -   `logic/`: Core backend business logic.
        -   `priority_metrics/`: Modules for calculating a word's priority score.
        -   `quiz_selector.py`: Orchestrates word selection for quizzes.
        -   `word_updater.py`: Updates a word's repetition statistics.
        -   `report_updater.py`: Updates daily performance reports.
    -   `routes/`: Flask blueprints defining the API endpoints.
    -   `output/`: AI-generated master vocabulary files (`output_a1.json`, etc.).
    -   `repetition-list/`: Stores user-specific progress for each unique word meaning.
    -   `performance-report/`: Contains the daily performance summary.
-   `frontend/`: The React application.
    -   `src/components/`: Reusable React components.
    -   `src/context/`: React Context for global quiz state management.
    -   `src/hooks/`: Custom hooks for managing component logic (`useQuiz`, etc.).

### Key Scripts and Data Management

-   **Data Structure (`output/*.json`):** The core vocabulary data follows a numeric key structure. Each key (e.g., `"1"`) maps to a JSON **array**. This array contains one or more objects, where each object represents a distinct meaning or form of the word.
    ```json
    {
      "1": [ { /* details for meaning 1 */ } ],
      "2": [ { /* details for homonym meaning 1 */ }, { /* details for homonym meaning 2 */ } ]
    }
    ```

-   **`process_metrics.py`**: This script populates the vocabulary.
    -   It reads German words from `input.txt`.
    -   It intelligently skips any words that already exist in any `output/` file.
    -   For new words, it calls the OpenAI API using the prompt in `system_prompt.txt`.
    -   It processes the AI's response and appends the new word data to the appropriate `output/{level}.json` file.

-   **`file_validator.py`**: A crucial utility script for maintaining data integrity.
    -   **Relocates:** Scans all `output/` files and moves any word entry to the correct level file if its `"level"` property doesn't match the filename.
    -   **Standardizes:** After checking, it **rewrites all `output/` files**, sorting every word alphabetically and re-indexing them with sequential numeric keys (`"1"`, `"2"`, `"3"`, ...). This ensures the data is always clean, predictable, and consistently ordered.